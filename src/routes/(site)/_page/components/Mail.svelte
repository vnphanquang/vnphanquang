<script lang="ts">
  import { clickoutside } from '@svelte-put/clickoutside';
  import { fly, fade } from 'svelte/transition';

  import AnimatedMail from './AnimatedMail.svelte';
  let letter = false;
  let cls = '';
  export { cls as class };
</script>

<div class="{cls}">
  <div class="relative h-[200px]">
    <AnimatedMail onclick={() => (letter = true)} />
  </div>

  {#if letter}
    <div class="fixed inset-0 z-overlay grid place-items-center">
      <div class="absolute inset-0 z-0 bg-gray-800/50" out:fade={{ duration: 200 }} />
      <div
        class="relative max-h-[90vh] w-10/12 max-w-3xl overflow-auto bg-bg p-6 shadow-2xl border-letter md:w-8/12 md:p-20 z-px"
        transition:fly={{ y: 20, duration: 250 }}
        use:clickoutside
        onclickoutside={() => (letter = false)}
      >
        <button
          type="button"
          onclick={() => (letter = false)}
          class="c-btn-icon absolute top-4 right-4"
          aria-label="Close"
        >
          <svg class="fill-current" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
        </button>
        <div class="prose">
          <p class="italic">Vietnam</p>
          <p class="italic">
            {new Intl.DateTimeFormat('en-GB', { dateStyle: 'full' }).format(new Date())}
          </p>
          <p>Dear visitor,</p>
          <p
            class="first-letter:float-left first-letter:text-6xl first-letter:font-bold first-letter:text-primary"
          >
            Thank you for taking the time to stop by my personal website & digital playground.
          </p>
          <p>
            My name is Quang Phan. In one sentence, i am currently a learner, a developer, a bicycle
            commuter, and an enthusiast for music theory & many other things.
          </p>
          <p>
            You can also find me at <span class="italic font-medium">@vnphanquang</span> on most social platforms. See you out there!
          </p>
          <p>Cheers,</p>
          <svg class="h-auto fill-current" width="200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 440.614 115.634"><title>Signature of Quang Phan (vnphanquang)</title><path d="M327.44,39.155a11.754,11.754,0,0,0,6.9-.949c7.12-3.046,14.2-6.193,21.306-9.261a31.941,31.941,0,0,1,7.93-2.779c3.188-.466,4.157.27,4.451,3.524,1.474-.672,2.894-1.313,4.308-1.965a185.141,185.141,0,0,1,47.512-14.871c5.423-.9,10.9-1.392,16.34-.146,6,1.375,8.068,6.645,4.695,11.83a31.44,31.44,0,0,1-8.356,8.123c-17.379,12.515-36.514,21.608-56.537,28.966C351.3,70.7,326.718,80.08,301.891,88.758a582.232,582.232,0,0,1-67.8,19.031c-10.777,2.357-21.6,4.435-32.5,6.021a259.85,259.85,0,0,1-27.583,2.783c-7.062.269-14.1.689-21.143-.08a43.141,43.141,0,0,1-14.278-3.568,15.028,15.028,0,0,1-4.224-2.881c-2.607-2.621-2.739-5.822-.283-8.617a24.4,24.4,0,0,1,8.449-5.713c6.422-2.975,13.3-4.212,20.222-5.218a72.786,72.786,0,0,1,13.733-.89c-3.251.53-6.507,1.029-9.752,1.6a106.712,106.712,0,0,0-22.671,6.511,22.627,22.627,0,0,0-6.944,4.329c-2.866,2.7-2.8,4.918.406,7.257,3.651,2.664,7.958,3.628,12.335,4.142,12.949,1.519,25.833.36,38.731-.94,11.666-1.176,23.2-3.139,34.681-5.413,12.288-2.434,24.455-5.406,36.583-8.578,29.884-7.816,58.688-18.777,87.582-29.506,15.22-5.652,30.56-10.989,45.475-17.422A194.587,194.587,0,0,0,432.721,28.68a22.672,22.672,0,0,0,5.3-5.416c2.584-3.831,1.447-7.157-3.04-8.3-4.388-1.12-8.881-.8-13.286-.136a176.736,176.736,0,0,0-48.318,14.962,108.106,108.106,0,0,0-15.923,9.376A109.714,109.714,0,0,1,345.58,46.13a7.893,7.893,0,0,1-1.706.693,1.43,1.43,0,0,1-1.73-.782,1.337,1.337,0,0,1,.533-1.8,15.1,15.1,0,0,1,1.613-.9A110.1,110.1,0,0,0,361.836,32.3a15.66,15.66,0,0,0,2.932-2.865c.793-1.045.4-1.477-.762-1.488a9.52,9.52,0,0,0-3.218.6c-7.526,2.6-14.734,5.957-22,9.176a34.84,34.84,0,0,1-9.52,3.175,11.655,11.655,0,0,1-3.876-.052c-1.841-.371-1.75-1.4-1.092-2.675a8.1,8.1,0,0,1,3.068-2.973,102.837,102.837,0,0,1,10.2-5.332c.752-.369,1.673-.71,2.221.173.622,1-.39,1.464-1.007,1.92-2.482,1.832-4.974,3.643-8.036,4.46A6.083,6.083,0,0,0,327.44,39.155Z" transform="translate(-1.886 -1.317)"/><path d="M222.148,41.793c-3.068.955-3.465.814-5-1.687-.516-.839-1.113-.224-1.579-.037-2.367.952-4.821,1.977-7.317,1.927-4.278-.086-8.366.83-12.518,1.5-1.285.207-2.726.17-3.534-1.105s-.143-2.522.5-3.672a48.958,48.958,0,0,1,4.225-6.068,12.428,12.428,0,0,0,2.008-3.57c.8-2.339-.391-3.782-2.867-3.476a14.285,14.285,0,0,0-4.271,1.433c-5,2.337-9.312,5.776-13.944,8.7-4.983,3.146-9.858,6.462-14.783,9.7a10.074,10.074,0,0,1-1.409.846c-.787.348-1.651.505-2.238-.3-.566-.778-.022-1.4.509-1.979,2.83-3.066,5.655-6.136,8.77-9.518a5.856,5.856,0,0,0-2.908,1.409c-8.177,5.745-16.683,10.82-26.542,13.169a17.52,17.52,0,0,1-5.076.684c-3.388-.2-4.758-2.406-3.4-5.512,1.342-3.074,3.7-5.415,5.853-7.893,4.953-5.7,10.792-10.533,15.845-16.138a33.175,33.175,0,0,0,6.943-11.074c.463-1.3,1.383-2.827.25-4.075-1.029-1.132-2.6-.573-3.914-.32a67.373,67.373,0,0,0-17.258,5.886c-4.119,2.041-8.059,4.394-12.034,6.69a5,5,0,0,0-2.329,2.709,25.827,25.827,0,0,1-8.044,10.5c-7.462,6.246-15.034,12.361-22.583,18.5-6.484,5.275-12.9,10.64-19.85,15.309-1.19.8-2.733,1.917-3.888.667-1.368-1.481.254-2.8,1.229-3.834C85.634,45.69,101.114,31.2,119.767,20.53c.772-.441,1.508-.947,2.25-1.44a1.444,1.444,0,0,0,.813-1.532c-.174-.784-.812-1.05-1.54-1.128a13.908,13.908,0,0,0-5.458.794c-8.777,2.6-17.006,6.532-25.225,10.478C70.137,37.528,51.573,50.48,32.74,63c-10.09,6.706-19.1,14.7-27.9,22.952-.888.833-1.84,1.6-2.882,2.5-.3-1,.385-1.242.767-1.638,11.737-12.152,25.156-22.173,39.3-31.324,12.545-8.119,24.894-16.548,38.136-23.529a276.86,276.86,0,0,1,32.13-14.73,36.778,36.778,0,0,1,6.935-1.885c1.892-.31,3.718-.378,5.029,1.394.715.966,1.352.216,1.94-.126,4.144-2.416,8.255-4.883,12.57-7a68.633,68.633,0,0,1,17.32-5.735c4.775-.924,5.973.51,4.6,5.182-1.637,5.566-5.226,9.887-9.062,14.027-5.17,5.58-10.864,10.665-15.639,16.616a22.577,22.577,0,0,0-3.136,4.561c-.44.953-.9,2-.175,2.912a2.872,2.872,0,0,0,2.865.708,52.05,52.05,0,0,0,16.138-5.329A138.562,138.562,0,0,0,174.54,27.622c5.329-4.228,9.444-9.716,14.021-14.717,3.193-3.489,6.222-7.145,10.087-9.936,1.156-.835,2.609-2.488,3.917-1.142,1.361,1.4-.471,2.709-1.319,3.824a80.728,80.728,0,0,1-14.9,14.687c-6.332,4.929-11.143,11.317-16.7,16.988a8.572,8.572,0,0,0-2.066,3.017q4.537-2.907,9.074-5.816c3.749-2.407,7.465-4.866,11.254-7.207a24.929,24.929,0,0,1,7.526-3.242c1.818-.414,3.6-.288,4.927,1.233s1.129,3.253.436,5.028c-.888,2.277-2.494,4.079-3.835,6.06-.844,1.247-1.638,2.528-2.456,3.793-.783,1.212-.543,1.928.98,2.016a20.415,20.415,0,0,0,6.682-.983,1.249,1.249,0,0,0,1.04-.89c.385-1.941,1.865-3.008,3.324-4.005,4.525-3.092,9.015-6.245,13.824-8.895a7.573,7.573,0,0,1,3.47-1.183c.618-.013,1.266-.026,1.647.6a1.7,1.7,0,0,1-.2,1.927,13.012,13.012,0,0,1-3.505,3.133,70.659,70.659,0,0,1-11.425,6.969A4.216,4.216,0,0,0,213.2,38.5c5.053-1.715,9.414-4.717,13.9-7.5.959-.6,2.158-1.99,3.192-.552,1.054,1.466-.7,2.138-1.571,2.805-2.284,1.744-4.76,3.242-7.017,5.019C219.158,40.271,219.23,40.4,222.148,41.793ZM71.29,63.186a5,5,0,0,0,2.6-1.222c13.737-10,26.651-21.043,39.928-31.627a32.726,32.726,0,0,0,7.68-8.493c.249-.409.825-.8.257-1.579A180.074,180.074,0,0,0,71.29,63.186ZM208.024,38.343c3.207-.417,12.426-6.616,14.294-9.713C217.124,31.873,212.479,34.967,208.024,38.343ZM199.631,4.6c-3.837,2.566-6.589,6.146-9.307,9.762A44.428,44.428,0,0,0,199.631,4.6Z" transform="translate(-1.886 -1.317)"/><path d="M266.942,44.361a3.2,3.2,0,0,0,2.355-.225c8.218-2.634,16.044-6,22.438-12.039a13.286,13.286,0,0,1,1.983-1.461,1.258,1.258,0,0,1,1.7.1c.592.611.156,1.172-.256,1.62-.88.957-1.832,1.848-2.729,2.791a28.34,28.34,0,0,0-2.049,2.3c-.482.633-1.169,1.353-.76,2.2s1.384.761,2.2.756a23.379,23.379,0,0,0,9.907-2.423c5.01-2.371,10.176-4.46,14.716-7.734a4.4,4.4,0,0,1,1.089-.563c.679-.241,1.388-.328,1.8.433a1.245,1.245,0,0,1-.485,1.624c-.684.569-1.409,1.089-2.128,1.612a26.86,26.86,0,0,0-4.71,3.96c-1.982,2.29-1.914,2.784.458,4.326-3.35,1.075-4.591-.3-4-4.7-1.89.889-3.651,1.756-5.444,2.553a27.992,27.992,0,0,1-11.891,2.851c-3.032-.051-3.849-.775-4.291-4.18-3.376,2.4-7.175,3.5-10.807,5-3.059,1.263-6.131,2.406-9.491,2.412a2.061,2.061,0,0,0-1.675,1.012c-5.52,6.916-12.249,12.755-17.632,19.794-.33.431-.607,1.324-1.377.836-.567-.36-.423-1.14-.243-1.72a17.307,17.307,0,0,1,3.5-6.46q7.433-8.381,14.905-16.725a7.667,7.667,0,0,0,1.257-1.708,65.776,65.776,0,0,1-7.761,2.017,23.454,23.454,0,0,1-4.292.363A1.7,1.7,0,0,1,252,39.9a66.413,66.413,0,0,1,7.734-6.109c3.3-2.442,6.915-4.487,9.608-7.674.773-.915,2.046-1.91,1.434-3.17-.669-1.376-2.332-1.346-3.674-1.179-2.3.288-4.588.759-6.867,1.223-1.148.233-1.794,1.206-2.524,2.018a119.517,119.517,0,0,1-13.58,13.127,13.991,13.991,0,0,1-6.15,3.168c-1.069.206-2.122.291-2.828-.637a2.607,2.607,0,0,1,.1-2.911c2.208-4.359,5.913-7.316,9.666-10.2a23.731,23.731,0,0,1,8.114-4.35c3.208-.863,5.121-2.926,6.738-5.562,1.791-2.918,3.641-5.8,5.492-8.684,1.894-2.948,4.252-5.383,7.665-6.545,1.528-.52,2.537.215,2.226,1.538-.115.488-.313,1.011-.922.878-2.1-.46-3.189,1.094-4.24,2.313-3.406,3.949-5.5,8.76-8.657,13.178a9.1,9.1,0,0,0,3.7-.258,11.365,11.365,0,0,1,5.688.23c2.61.875,3.34,2.679,2,5.123a17.427,17.427,0,0,1-5.106,5.562c-3.688,2.734-7.4,5.432-11.092,8.161a3.45,3.45,0,0,0-1.608,1.835,25.844,25.844,0,0,0,10.64-2.859,53.041,53.041,0,0,0,10.767-7.5c.927-.84,2.037-2.241,3.31-1.033,1.319,1.251-.184,2.354-.922,3.315-2.822,3.673-6.888,6.056-9.944,9.495C268.236,42.994,267.676,43.572,266.942,44.361ZM253.06,25.58a33.878,33.878,0,0,0-14.868,11.534c-.3.4-.874.931-.406,1.43s1.017-.051,1.45-.318C244.646,34.891,248.772,30.139,253.06,25.58Z" transform="translate(-1.886 -1.317)"/></svg>
        </div>
      </div>
    </div>
  {/if}
</div>
